{"version":3,"file":"static/js/869.db350c38.chunk.js","mappings":"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","sources":["components/hooks/useFetch.jsx","components/list/PriceList.jsx","pages/rooms/prices/RoomPrices.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nexport default function useFetch(url, load) {\n   const [data, setData] = useState(null);\n   const [loading, setLoading] = useState(true);\n   const [error, setError] = useState(null);\n   useEffect(() => {\n      fetch(url)\n         .then((res) => {\n            if (res.status >= 400) {\n               throw new Error(\"Server responds with error!\");\n            }\n            return res.json();\n         })\n         .then(\n            (data) => {\n               setData(data);\n               setLoading(false);\n            },\n            (error) => {\n               setLoading(false);\n               setError(error);\n            }\n         );\n   }, [load]);\n   return { data, loading, error };\n}\n","import \"./list.scss\";\nimport { useState, useRef, useEffect, memo } from \"react\";\nimport useFetch from \"../hooks/useFetch\";\nimport Modal from \"../modal/Modal\";\nimport { BsTrash } from \"react-icons/bs\";\nimport { BsPencil } from \"react-icons/bs\";\n\nfunction AddPrice(props) {\n   const { data, loading, error } = useFetch(\n      \"http://localhost:8000/room-types\"\n   );\n\n   const method = [\"Giờ\", \"Đêm\", \"Ngày\"];\n   const [price, setPrice] = useState({\n      type: \"Nhỏ\",\n      method: \"Giờ\",\n      early: null,\n      price: null,\n      late: null,\n   });\n\n   useEffect(() => {\n      props.nameRef.current.focus();\n   }, []);\n\n   const handleSubmit = (e) => {\n      e.preventDefault();\n      fetch(\"http://localhost:8000/room-prices\", {\n         method: \"POST\",\n         headers: { \"Content-Type\": \"application/json\" },\n         body: JSON.stringify(price),\n      });\n      props.setOpen((prev) => ({ ...prev, add: false }));\n      props.onLoad();\n   };\n\n   const updatePrice = (e) => {\n      setPrice((prev) => ({ ...prev, [e.target.name]: e.target.value }));\n   };\n\n   return (\n      <Modal\n         title=\"Thêm giá phòng\"\n         setOpen={props.setOpen}\n         body={\n            <div className=\"form\">\n               <label className=\"input\">\n                  Loại phòng:\n                  <select\n                     ref={props.nameRef}\n                     name=\"type\"\n                     value={price.type}\n                     onChange={updatePrice}\n                  >\n                     {data?.map((data, index) => (\n                        <option key={index} value={data.name}>\n                           {data.name}\n                        </option>\n                     ))}\n                  </select>\n               </label>\n               <label className=\"input\">\n                  Cách tính:\n                  <select\n                     name=\"method\"\n                     value={price.method}\n                     onChange={updatePrice}\n                  >\n                     {method?.map((data, index) => (\n                        <option key={index} value={data}>\n                           {data}\n                        </option>\n                     ))}\n                  </select>\n               </label>\n               {price.method === \"Ngày\" ? (\n                  <label className=\"input\">\n                     Vào sớm:\n                     <input\n                        type=\"text\"\n                        name=\"early\"\n                        value={price.early}\n                        placeholder={\n                           price.method === \"Giờ\" ? \"1 giờ đầu\" : null\n                        }\n                        onChange={updatePrice}\n                     />\n                  </label>\n               ) : null}\n               <label className=\"input\">\n                  Giá phòng:\n                  <input\n                     type=\"text\"\n                     name=\"price\"\n                     value={price.price}\n                     placeholder={price.method === \"Giờ\" ? \"1 giờ đầu\" : null}\n                     onChange={updatePrice}\n                  />\n               </label>\n\n               <label className=\"input\">\n                  Trả trễ:\n                  <input\n                     type=\"text\"\n                     name=\"late\"\n                     value={price.late}\n                     onChange={updatePrice}\n                  />\n               </label>\n            </div>\n         }\n         footer={\n            <>\n               <button onClick={handleSubmit} className=\"btn btn-submit\">\n                  Thực hiện\n               </button>\n            </>\n         }\n      />\n   );\n}\n\nfunction EditPrice(props) {\n   const { data, loading, error } = useFetch(\n      \"http://localhost:8000/room-types\"\n   );\n\n   const method = [\"Giờ\", \"Đêm\", \"Ngày\"];\n\n   const [price, setPrice] = useState(props.price);\n\n   useEffect(() => {\n      props.nameRef.current.focus();\n   }, []);\n\n   const handleSubmit = (e) => {\n      e.preventDefault();\n      fetch(`http://localhost:8000/room-prices/${price.id}`, {\n         method: \"PATCH\",\n         headers: { \"Content-Type\": \"application/json\" },\n         body: JSON.stringify(price),\n      });\n      props.onLoad();\n      props.setOpen(false);\n   };\n   const updatePrice = (e) => {\n      setPrice((prev) => ({ ...prev, [e.target.name]: e.target.value }));\n   };\n   return (\n      <Modal\n         title=\"Sửa giá phòng\"\n         setOpen={props.setOpen}\n         body={\n            <div className=\"form\">\n               <label className=\"input\">\n                  Mã:\n                  <input type=\"text\" name=\"id\" value={price.id} readOnly />\n               </label>\n               <label className=\"input\">\n                  Loại phòng:\n                  <select\n                     ref={props.nameRef}\n                     name=\"type\"\n                     value={price.type}\n                     onChange={updatePrice}\n                  >\n                     {data?.map((data, index) => (\n                        <option key={index} value={data.name}>\n                           {data.name}\n                        </option>\n                     ))}\n                  </select>\n               </label>\n               <label className=\"input\">\n                  Cách tính:\n                  <select\n                     name=\"method\"\n                     value={price.method}\n                     onChange={updatePrice}\n                  >\n                     {method?.map((data, index) => (\n                        <option key={index} value={data}>\n                           {data}\n                        </option>\n                     ))}\n                  </select>\n               </label>\n               {price.method === \"Ngày\" ? (\n                  <label className=\"input\">\n                     Vào sớm:\n                     <input\n                        type=\"text\"\n                        name=\"early\"\n                        value={price.early}\n                        onChange={updatePrice}\n                     />\n                  </label>\n               ) : null}\n               <label className=\"input\">\n                  Giá phòng:\n                  <input\n                     type=\"text\"\n                     name=\"price\"\n                     value={price.price}\n                     placeholder={price.method === \"Giờ\" ? \"1 giờ đầu\" : null}\n                     onChange={updatePrice}\n                  />\n               </label>\n\n               <label className=\"input\">\n                  Trả trễ:\n                  <input\n                     type=\"text\"\n                     name=\"late\"\n                     value={price.late}\n                     onChange={updatePrice}\n                  />\n               </label>\n            </div>\n         }\n         footer={\n            <>\n               <button onClick={handleSubmit} className=\"btn btn-submit\">\n                  Thực hiện\n               </button>\n            </>\n         }\n      />\n   );\n}\nexport default function PriceList() {\n   const [load, setLoad] = useState(false);\n   const { data, loading, error } = useFetch(\n      \"http://localhost:8000/room-prices\",\n      load\n   );\n   const [open, setOpen] = useState({\n      add: false,\n      edit: false,\n   });\n   const [priceEdit, setPriceEdit] = useState();\n\n   const nameRef = useRef();\n\n   const handleEdit = (id) => {\n      const priceChoose = data?.find((current) =>\n         current.id === id ? current : null\n      );\n      setPriceEdit(priceChoose);\n      setOpen((prev) => ({ ...prev, edit: true }));\n   };\n\n   const handleDelete = (id) => {\n      fetch(`http://localhost:8000/room-prices/${id}`, {\n         method: \"delete\",\n      });\n      handleReLoad();\n   };\n\n   const handleReLoad = () => {\n      setLoad(!load);\n   };\n\n   const render = (array) =>\n      array?.map((res) => (\n         <tr key={res.id}>\n            <td>{res.id}</td>\n            <td>{res.type}</td>\n            <td>{res.method}</td>\n            <td>{res.early}</td>\n            <td>{res.price}</td>\n            <td>{res.late}</td>\n            <td>\n               <BsPencil\n                  className=\"icon icon__edit\"\n                  onClick={() => handleEdit(res.id)}\n               />\n            </td>\n            <td>\n               <BsTrash\n                  className=\"icon icon__delete\"\n                  onClick={() => handleDelete(res.id)}\n               />\n            </td>\n         </tr>\n      ));\n\n   return (\n      <div className=\"list\">\n         <div className=\"list__header\">\n            <h3 className=\"title list__title\">Thông tin giá phòng</h3>\n            <button\n               className=\"btn btn-add\"\n               onClick={() => setOpen((prev) => ({ ...prev, add: true }))}\n            >\n               Thêm giá phòng\n            </button>\n            {open.add && (\n               <AddPrice\n                  setOpen={setOpen}\n                  nameRef={nameRef}\n                  onLoad={handleReLoad}\n               />\n            )}\n            {open.edit && (\n               <EditPrice\n                  setOpen={setOpen}\n                  nameRef={nameRef}\n                  onLoad={handleReLoad}\n                  price={priceEdit}\n               />\n            )}\n         </div>\n         <table>\n            <thead>\n               <tr>\n                  <th>Id</th>\n                  <th>Room Type</th>\n                  <th>Method</th>\n                  <th>Early</th>\n                  <th>Price</th>\n                  <th>Late</th>\n                  <th>Edit</th>\n                  <th>Delete</th>\n               </tr>\n            </thead>\n            <tbody>\n               {loading && (\n                  <tr>\n                     <td>Loading ... </td>\n                     <td>Loading ... </td>\n                     <td>Loading ... </td>\n                     <td>Loading ... </td>\n                     <td>Loading ... </td>\n                     <td>Loading ... </td>\n                     <td>\n                        <BsPencil className=\"icon icon__edit\" />\n                     </td>\n                     <td>\n                        <BsTrash className=\"icon icon__delete\" />\n                     </td>\n                  </tr>\n               )}\n               {render(data)}\n            </tbody>\n         </table>\n      </div>\n   );\n}\n","import Container from \"../../../components/container/Container\";\nimport PriceList from \"../../../components/list/PriceList\";\n\nexport default function RoomPrices() {\n   return (\n      <div className=\"page\">\n         <Container\n            title=\"Giá phòng\"\n            body={\n               <>\n                  <PriceList />\n               </>\n            }\n         />\n      </div>\n   );\n}\n"],"names":["useFetch","url","load","useState","data","setData","loading","setLoading","error","setError","useEffect","fetch","then","res","status","Error","json","AddPrice","props","method","type","early","price","late","setPrice","nameRef","current","focus","updatePrice","e","prev","target","name","value","Modal","title","setOpen","body","className","ref","onChange","map","index","placeholder","footer","onClick","preventDefault","headers","JSON","stringify","add","onLoad","EditPrice","id","readOnly","PriceList","array","setLoad","edit","open","priceEdit","setPriceEdit","useRef","handleReLoad","priceChoose","find","handleEdit","RoomPrices","Container"],"sourceRoot":""}